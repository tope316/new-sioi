{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _s = $RefreshSig$();\n\nimport useSWR from \"swr\";\nimport { useCookies } from \"react-cookie\";\nvar baseUrl = \"http://localhost:3000/api/v1/auth\";\nexport var useLogin = function useLogin(usr, pwd, typ) {\n  _s();\n\n  var url = baseUrl;\n\n  var fetcher = function fetcher(url) {\n    return fetch(url, {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        username: usr,\n        password: pwd,\n        type: typ\n      })\n    }).then(function (res) {\n      return res.json();\n    });\n  };\n\n  var _useCookies = useCookies([\"jwt\"]),\n      _useCookies2 = _slicedToArray(_useCookies, 2),\n      cookie = _useCookies2[0],\n      setCookie = _useCookies2[1];\n\n  var _useSWR = useSWR(url, fetcher),\n      response = _useSWR.data,\n      error = _useSWR.error;\n\n  if (response) {\n    console.log(response.data.token);\n    setCookie(\"jwt\", JSON.stringify(response.data.token), {\n      path: \"/\",\n      maxAge: 3600,\n      // Expires after 1hr\n      sameSite: true\n    });\n  }\n\n  return {\n    response: response,\n    error: error\n  };\n};\n\n_s(useLogin, \"OpH1keHMIjkMTEp9EenNvHGE/J0=\", false, function () {\n  return [useCookies, useSWR];\n});","map":{"version":3,"sources":["D:/ReactJS/new-sioi/core/useLogin.ts"],"names":["useSWR","useCookies","baseUrl","useLogin","usr","pwd","typ","url","fetcher","fetch","method","headers","body","JSON","stringify","username","password","type","then","res","json","cookie","setCookie","response","data","error","console","log","token","path","maxAge","sameSite"],"mappings":";;;;AAAA,OAAOA,MAAP,MAAmB,KAAnB;AACA,SAASC,UAAT,QAA2B,cAA3B;AAEA,IAAMC,OAAO,GAAG,mCAAhB;AAEA,OAAO,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAACC,GAAD,EAAKC,GAAL,EAASC,GAAT,EAAiB;AAAA;;AACrC,MAAMC,GAAG,GAAGL,OAAZ;;AACA,MAAMM,OAAO,GAAG,SAAVA,OAAU,CAAAD,GAAG;AAAA,WAAIE,KAAK,CAACF,GAAD,EAAM;AAC9BG,MAAAA,MAAM,EAAE,MADsB;AAE9BC,MAAAA,OAAO,EAAE;AACL,kBAAU,kBADL;AAEL,wBAAgB;AAFX,OAFqB;AAM9BC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAACC,QAAAA,QAAQ,EAAEX,GAAX;AAAgBY,QAAAA,QAAQ,EAAEX,GAA1B;AAA+BY,QAAAA,IAAI,EAAEX;AAArC,OAAf;AANwB,KAAN,CAAL,CAOpBY,IAPoB,CAOf,UAAAC,GAAG;AAAA,aAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,KAPY,CAAJ;AAAA,GAAnB;;AAFqC,oBAUTnB,UAAU,CAAC,CAAC,KAAD,CAAD,CAVD;AAAA;AAAA,MAU9BoB,MAV8B;AAAA,MAUtBC,SAVsB;;AAAA,gBAWHtB,MAAM,CAACO,GAAD,EAAMC,OAAN,CAXH;AAAA,MAWvBe,QAXuB,WAW7BC,IAX6B;AAAA,MAWbC,KAXa,WAWbA,KAXa;;AAYrC,MAAIF,QAAJ,EAAc;AACVG,IAAAA,OAAO,CAACC,GAAR,CAAYJ,QAAQ,CAACC,IAAT,CAAcI,KAA1B;AACAN,IAAAA,SAAS,CAAC,KAAD,EAAQT,IAAI,CAACC,SAAL,CAAeS,QAAQ,CAACC,IAAT,CAAcI,KAA7B,CAAR,EAA6C;AAClDC,MAAAA,IAAI,EAAE,GAD4C;AAElDC,MAAAA,MAAM,EAAE,IAF0C;AAEpC;AACdC,MAAAA,QAAQ,EAAE;AAHwC,KAA7C,CAAT;AAKH;;AACD,SAAO;AAAER,IAAAA,QAAQ,EAARA,QAAF;AAAYE,IAAAA,KAAK,EAALA;AAAZ,GAAP;AACH,CArBM;;GAAMtB,Q;UAUmBF,U,EACMD,M","sourcesContent":["import useSWR from \"swr\"\nimport { useCookies } from \"react-cookie\"\n\nconst baseUrl = \"http://localhost:3000/api/v1/auth\"\n\nexport const useLogin = (usr,pwd,typ) => {\n    const url = baseUrl\n    const fetcher = url => fetch(url, {\n        method: 'POST',\n        headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({username: usr, password: pwd, type: typ}),\n    }).then(res => res.json())\n    const [cookie, setCookie] = useCookies([\"jwt\"])\n    const { data: response, error } = useSWR(url, fetcher)\n    if (response) {\n        console.log(response.data.token)\n        setCookie(\"jwt\", JSON.stringify(response.data.token), {\n            path: \"/\",\n            maxAge: 3600, // Expires after 1hr\n            sameSite: true,\n          })\n    }\n    return { response, error }\n}"]},"metadata":{},"sourceType":"module"}