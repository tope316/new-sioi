{"ast":null,"code":"import { atom, DefaultValue } from 'recoil';\n\nconst localStorageEffect = key => ({\n  setSelf,\n  onSet\n}) => {\n  try {\n    const savedValue = localStorage.getItem(key);\n\n    if (savedValue != null) {\n      setSelf(JSON.parse(savedValue));\n    }\n  } catch (error) {// DO NOTHING - SSR MODE\n  }\n\n  onSet(newValue => {\n    if (newValue instanceof DefaultValue) {\n      localStorage.removeItem(key);\n    } else {\n      localStorage.setItem(key, JSON.stringify(newValue));\n    }\n  });\n};\n\nexport const ApplicationState = atom({\n  key: 'app/state',\n  default: {\n    user: {\n      name: '',\n      username: '',\n      password: '',\n      token: ''\n    },\n    setting: {\n      language: 'en'\n    }\n  },\n  effects_UNSTABLE: [localStorageEffect('app/state')]\n});","map":{"version":3,"sources":["/home/aguel/web/atom/ApplicationState.ts"],"names":["atom","DefaultValue","localStorageEffect","key","setSelf","onSet","savedValue","localStorage","getItem","JSON","parse","error","newValue","removeItem","setItem","stringify","ApplicationState","default","user","name","username","password","token","setting","language","effects_UNSTABLE"],"mappings":"AAAA,SAASA,IAAT,EAAyBC,YAAzB,QAA6C,QAA7C;;AAEA,MAAMC,kBAAkB,GAAGC,GAAG,IAAI,CAAC;AAAEC,EAAAA,OAAF;AAAWC,EAAAA;AAAX,CAAD,KAAwB;AACtD,MAAI;AACA,UAAMC,UAAU,GAAGC,YAAY,CAACC,OAAb,CAAqBL,GAArB,CAAnB;;AACA,QAAIG,UAAU,IAAI,IAAlB,EAAwB;AACpBF,MAAAA,OAAO,CAACK,IAAI,CAACC,KAAL,CAAWJ,UAAX,CAAD,CAAP;AACH;AACJ,GALD,CAKE,OAAOK,KAAP,EAAc,CACZ;AACH;;AAEDN,EAAAA,KAAK,CAACO,QAAQ,IAAI;AACd,QAAIA,QAAQ,YAAYX,YAAxB,EAAsC;AAClCM,MAAAA,YAAY,CAACM,UAAb,CAAwBV,GAAxB;AACH,KAFD,MAEO;AACHI,MAAAA,YAAY,CAACO,OAAb,CAAqBX,GAArB,EAA0BM,IAAI,CAACM,SAAL,CAAeH,QAAf,CAA1B;AACH;AACJ,GANI,CAAL;AAOH,CAjBD;;AAmBA,OAAO,MAAMI,gBAAgB,GAAGhB,IAAI,CAAC;AACjCG,EAAAA,GAAG,EAAE,WAD4B;AAEjCc,EAAAA,OAAO,EAAE;AACLC,IAAAA,IAAI,EAAE;AACFC,MAAAA,IAAI,EAAE,EADJ;AAEFC,MAAAA,QAAQ,EAAE,EAFR;AAGFC,MAAAA,QAAQ,EAAE,EAHR;AAIFC,MAAAA,KAAK,EAAE;AAJL,KADD;AAOLC,IAAAA,OAAO,EAAE;AACLC,MAAAA,QAAQ,EAAE;AADL;AAPJ,GAFwB;AAajCC,EAAAA,gBAAgB,EAAE,CACdvB,kBAAkB,CAAC,WAAD,CADJ;AAbe,CAAD,CAA7B","sourcesContent":["import { atom, selector, DefaultValue } from 'recoil'\n\nconst localStorageEffect = key => ({ setSelf, onSet }) => {\n    try {\n        const savedValue = localStorage.getItem(key)\n        if (savedValue != null) {\n            setSelf(JSON.parse(savedValue))\n        }\n    } catch (error) {\n        // DO NOTHING - SSR MODE\n    }\n\n    onSet(newValue => {\n        if (newValue instanceof DefaultValue) {\n            localStorage.removeItem(key);\n        } else {\n            localStorage.setItem(key, JSON.stringify(newValue));\n        }\n    })\n}\n\nexport const ApplicationState = atom({\n    key: 'app/state',\n    default: {\n        user: {\n            name: '',\n            username: '',\n            password: '',\n            token: ''\n        },\n        setting: {\n            language: 'en'\n        }\n    },\n    effects_UNSTABLE: [\n        localStorageEffect('app/state'),\n    ],\n})\n"]},"metadata":{},"sourceType":"module"}