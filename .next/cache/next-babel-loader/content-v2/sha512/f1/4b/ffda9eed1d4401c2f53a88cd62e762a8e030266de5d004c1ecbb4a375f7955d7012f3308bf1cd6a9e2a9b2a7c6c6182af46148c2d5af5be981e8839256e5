{"ast":null,"code":"import useSWR from \"swr\";\nimport { useCookies } from \"react-cookie\";\nconst baseUrl = \"http://localhost:3000/api/v1/auth\";\nexport const useLogin = (usr, pwd, typ) => {\n  const url = baseUrl;\n\n  const fetcher = url => fetch(url, {\n    method: 'POST',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      username: usr,\n      password: pwd,\n      type: typ\n    })\n  }).then(res => res.json());\n\n  const [cookie, setCookie] = useCookies([\"jwt\"]);\n  const {\n    data: response,\n    error\n  } = useSWR(url, fetcher);\n\n  if (response) {\n    console.log(response.data.token);\n    setCookie(\"jwt\", response.data.token, {\n      path: \"/\",\n      maxAge: 3600,\n      // Expires after 1hr\n      sameSite: true\n    });\n  }\n\n  return {\n    response,\n    error\n  };\n};","map":{"version":3,"sources":["D:/ReactJS/new-sioi/core/useLogin.ts"],"names":["useSWR","useCookies","baseUrl","useLogin","usr","pwd","typ","url","fetcher","fetch","method","headers","body","JSON","stringify","username","password","type","then","res","json","cookie","setCookie","data","response","error","console","log","token","path","maxAge","sameSite"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,KAAnB;AACA,SAASC,UAAT,QAA2B,cAA3B;AAEA,MAAMC,OAAO,GAAG,mCAAhB;AAEA,OAAO,MAAMC,QAAQ,GAAG,CAACC,GAAD,EAAKC,GAAL,EAASC,GAAT,KAAiB;AACrC,QAAMC,GAAG,GAAGL,OAAZ;;AACA,QAAMM,OAAO,GAAGD,GAAG,IAAIE,KAAK,CAACF,GAAD,EAAM;AAC9BG,IAAAA,MAAM,EAAE,MADsB;AAE9BC,IAAAA,OAAO,EAAE;AACL,gBAAU,kBADL;AAEL,sBAAgB;AAFX,KAFqB;AAM9BC,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAACC,MAAAA,QAAQ,EAAEX,GAAX;AAAgBY,MAAAA,QAAQ,EAAEX,GAA1B;AAA+BY,MAAAA,IAAI,EAAEX;AAArC,KAAf;AANwB,GAAN,CAAL,CAOpBY,IAPoB,CAOfC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EAPQ,CAAvB;;AAQA,QAAM,CAACC,MAAD,EAASC,SAAT,IAAsBrB,UAAU,CAAC,CAAC,KAAD,CAAD,CAAtC;AACA,QAAM;AAAEsB,IAAAA,IAAI,EAAEC,QAAR;AAAkBC,IAAAA;AAAlB,MAA4BzB,MAAM,CAACO,GAAD,EAAMC,OAAN,CAAxC;;AACA,MAAIgB,QAAJ,EAAc;AACVE,IAAAA,OAAO,CAACC,GAAR,CAAYH,QAAQ,CAACD,IAAT,CAAcK,KAA1B;AACAN,IAAAA,SAAS,CAAC,KAAD,EAAQE,QAAQ,CAACD,IAAT,CAAcK,KAAtB,EAA6B;AAClCC,MAAAA,IAAI,EAAE,GAD4B;AAElCC,MAAAA,MAAM,EAAE,IAF0B;AAEpB;AACdC,MAAAA,QAAQ,EAAE;AAHwB,KAA7B,CAAT;AAKH;;AACD,SAAO;AAAEP,IAAAA,QAAF;AAAYC,IAAAA;AAAZ,GAAP;AACH,CArBM","sourcesContent":["import useSWR from \"swr\"\nimport { useCookies } from \"react-cookie\"\n\nconst baseUrl = \"http://localhost:3000/api/v1/auth\"\n\nexport const useLogin = (usr,pwd,typ) => {\n    const url = baseUrl\n    const fetcher = url => fetch(url, {\n        method: 'POST',\n        headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({username: usr, password: pwd, type: typ}),\n    }).then(res => res.json())\n    const [cookie, setCookie] = useCookies([\"jwt\"])\n    const { data: response, error } = useSWR(url, fetcher)\n    if (response) {\n        console.log(response.data.token)\n        setCookie(\"jwt\", response.data.token, {\n            path: \"/\",\n            maxAge: 3600, // Expires after 1hr\n            sameSite: true,\n          })\n    }\n    return { response, error }\n}"]},"metadata":{},"sourceType":"module"}